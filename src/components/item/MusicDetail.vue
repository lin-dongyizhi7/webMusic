<template>
  <div class="top">
    <svg
      id="return"
      t="1677822913246"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="3371"
      width="200"
      height="200"
      @click="updateDetailShow"
    >
      <path
        d="M631.04 161.941333a42.666667 42.666667 0 0 1 63.061333 57.386667l-2.474666 2.730667-289.962667 292.245333 289.706667 287.402667a42.666667 42.666667 0 0 1 2.730666 57.6l-2.474666 2.752a42.666667 42.666667 0 0 1-57.6 2.709333l-2.752-2.474667-320-317.44a42.666667 42.666667 0 0 1-2.709334-57.6l2.474667-2.752 320-322.56z"
        fill="#111111"
        p-id="3372"
      ></path>
    </svg>
    <div class="info">
      <div class="song">{{ music.name }}</div>
      <div class="singer">
        <span v-for="singer in music.ar" :key="singer"> {{ singer.name }} {{ " " }}</span>
      </div>
    </div>
    <svg
      id="share"
      t="1677822031431"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2192"
      width="200"
      height="200"
    >
      <path
        d="M576 192a128 128 0 1 1-60.96 240.576l-118.4 107.68c12.256 19.648 19.36 42.88 19.36 67.744l-0.032-1.376 202.176 47.36a128.064 128.064 0 0 1 111.456-77.824L736 576a128 128 0 1 1-127.296 141.568l-208-48.8a128 128 0 1 1-50.56-172.704l117.888-107.264A128 128 0 0 1 576 192z m160 448a64 64 0 1 0 0 128 64 64 0 0 0 0-128zM288 544a64 64 0 1 0 0 128 64 64 0 0 0 0-128z m288-288a64 64 0 1 0 0 128 64 64 0 0 0 0-128z"
        fill="#000000"
        p-id="2193"
      ></path>
    </svg>
  </div>
  <div class="main">
    <div class="back">
      <img :src="music.al.picUrl" alt="" />
    </div>
    <div class="box" v-show="!isLyricShow">
      <img
        :src="music.al.picUrl"
        alt=""
        class="img_ar"
        :class="{ img_ar_active: !toPlay, img_ar_paused: toPlay }"
        @click="isLyricShow = true"
      />
    </div>
    <div
      class="musicLyric"
      ref="musicLyric"
      v-show="isLyricShow"
      @click="isLyricShow = false"
    >
      <!-- {{ lyric }} -->
      <p
        v-for="item in lyric"
        :key="item"
        :class="{
          active: currentTime * 1000 >= item.time && currentTime * 1000 < item.next,
        }"
      >
        {{ item.lrc }}
      </p>
    </div>
  </div>
  <div class="icons">
    <svg
      id="like"
      t="1677823804998"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="3391"
      width="200"
      height="200"
    >
      <path d="M0 0h1024v1024H0z" fill="#FF0033" fill-opacity="0" p-id="3392"></path>
      <path
        d="M511.914667 154.069333l-0.554667-0.426666c-113.024-85.525333-272.021333-75.52-374.016 27.626666C83.562667 235.818667 53.333333 310.08 53.333333 387.541333c0 77.44 30.229333 151.701333 83.989334 206.229334l294.698666 300.053333a110.72 110.72 0 0 0 79.914667 34.176 110.976 110.976 0 0 0 80.213333-34.474667l294.421334-299.52c53.824-54.485333 84.096-128.810667 84.096-206.336 0-77.525333-30.293333-151.850667-84.138667-206.378666-100.245333-101.397333-255.530667-112.789333-368.128-32l-6.485333 4.778666z m329.088 72.192c41.984 42.496 65.664 100.672 65.664 161.408 0 60.757333-23.68 118.912-65.685334 161.408L546.197333 848.96a47.253333 47.253333 0 0 1-34.261333 15.04 46.976 46.976 0 0 1-33.962667-14.72L182.933333 548.864C140.970667 506.325333 117.333333 448.213333 117.333333 387.541333c0-60.693333 23.637333-118.805333 65.557334-161.301333 84.608-85.568 219.114667-88.618667 307.306666-6.933333l21.738667 20.138666 21.76-20.138666c88.149333-81.685333 222.677333-78.634667 307.306667 6.954666z"
        fill="#111111"
        p-id="3393"
      ></path>
    </svg>
    <svg
      id="download"
      t="1677823731240"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2194"
      width="200"
      height="200"
    >
      <path
        d="M768 768a32 32 0 0 1 0 64H256a32 32 0 0 1 0-64h512zM512 192a32 32 0 0 1 32 32v345.504l128.64-128.608a32 32 0 0 1 42.496-2.496l2.784 2.496a32 32 0 0 1 2.496 42.464l-2.496 2.784-181.024 181.024a32 32 0 0 1-42.464 2.496l-2.784-2.496-181.024-181.024a32 32 0 0 1 42.464-47.744l2.784 2.496L480 565.024V224a32 32 0 0 1 32-32z"
        fill="#000000"
        p-id="2195"
      ></path>
    </svg>
    <svg
      id="bell"
      t="1677823900233"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="11431"
      width="200"
      height="200"
    >
      <path
        d="M585.98 960c-20.66 0-40.72-8.12-56.04-23.44L87.45 494.07c-22.1-22.1-29.23-54.09-18.59-83.48s36.59-49.41 67.71-52.24l40.6-3.69c28.79-2.62 56.43-14.77 77.82-34.22l205.66-186.96c105.5-95.91 267.14-92.09 367.99 8.76l53.12 53.12c100.83 100.83 104.67 262.48 8.75 367.99L703.55 769c-19.44 21.4-31.6 49.04-34.21 77.83l-3.69 40.59c-2.83 31.13-22.85 57.08-52.23 67.72-9.02 3.27-18.3 4.86-27.44 4.86z m54.07-843.28c-51.45 0-102.96 18.5-143.94 55.75L290.45 359.44c-29.84 27.11-68.37 44.06-108.52 47.71l-40.59 3.69c-15.85 1.44-21.56 13.91-22.93 17.7-1.38 3.79-4.98 17.02 6.29 28.29L567.19 899.3c11.3 11.28 24.51 7.67 28.28 6.29 3.78-1.37 16.25-7.08 17.69-22.94l3.69-40.6c3.65-40.14 20.6-78.68 47.72-108.5L851.53 527.9c76.96-84.67 73.87-214.37-7.02-295.28l-53.12-53.12c-41.75-41.74-96.51-62.78-151.34-62.78z"
        fill="#333333"
        p-id="11432"
      ></path>
      <path
        d="M868.52 241.72c-2.02 0-4.05-0.07-6.09-0.21-6.5-0.45-12.6-3.29-17.12-7.96-0.27-0.28-0.89-0.96-1.3-1.43l-52.62-52.61c0.1 0.17-0.37-0.26-1.08-0.96a26.317 26.317 0 0 1-7.81-16.96c-1.74-25.1 7.32-49.54 24.86-67.06 16.29-16.3 37.98-25.29 61.05-25.29s44.76 8.99 61.07 25.3c16.31 16.31 25.29 37.99 25.29 61.07 0 23.07-8.98 44.75-25.29 61.07-16.12 16.09-38.05 25.04-60.96 25.04z m-32.99-92.6l39.36 39.34c6.57-1.2 12.56-4.28 17.33-9.06 6.36-6.36 9.85-14.81 9.85-23.8s-3.5-17.45-9.85-23.8c-12.74-12.72-34.92-12.73-47.6-0.01-4.8 4.78-7.9 10.75-9.09 17.33zM306.09 849.28c-35.08 0-68.07-13.66-92.89-38.48-51.23-51.22-51.23-134.57 0-185.79 8.97-8.96 19.21-16.58 30.44-22.65a26.33 26.33 0 0 1 31.16 4.55l14.56 14.56L417.1 749.19a26.36 26.36 0 0 1 4.54 31.2c-6.11 11.26-13.73 21.5-22.66 30.42-24.81 24.81-57.8 38.47-92.89 38.47z m-52.98-189.54c-0.9 0.83-1.79 1.67-2.65 2.54-30.67 30.66-30.67 80.58 0 111.26 30.65 30.66 80.58 30.67 111.27 0 0.86-0.86 1.7-1.75 2.52-2.65L253.11 659.74z"
        fill="#333333"
        p-id="11433"
      ></path>
    </svg>
    <svg
      id="comment"
      t="1677823766852"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2333"
      width="200"
      height="200"
      @click="openComments"
    >
      <path
        d="M869.084233 187.133028l-0.822738 472.610898-171.140799-0.297782c-11.939937-0.021489-23.394826 2.27481-34.3309 6.904247-10.936073 4.630461-20.73423 11.253298-29.396517 19.84907l-121.602545 121.17992L389.615137 685.774789c-3.971451-4.656043-8.450463-8.643867-13.402241-11.963473-4.969175-3.317559-10.103102-5.968945-15.399735-7.986905-5.315052-1.998517-10.93812-3.672646-16.906042-4.985548-5.948479-1.331321-11.935843-2.010797-17.925255-2.038426l-171.123402-0.298805 0.822738-472.610898 713.366194 1.24127L869.084233 187.133028zM889.121592 97.607038 135.973346 96.296183c-19.22997-0.033769-35.667338 6.567579-49.295729 19.813255-13.627369 13.246699-20.458961 29.481452-20.491707 48.711422L65.290517 679.186743c-0.033769 19.232017 6.740518 35.505655 20.321838 48.79124s29.996175 19.952424 49.227168 19.986193l191.023638 0.330528 172.844603 174.410262c3.287883 3.316535 7.609305 4.988618 12.910031 4.998851 1.338485 0.002047 2.659573-0.321318 3.980661-0.970094l7.966439-3.984754 173.435051-173.808558 191.022615 0.332575c19.232017 0.032746 35.669384-6.576789 49.298799-19.813255 13.626345-13.238512 20.456914-29.488615 20.48966-48.720631l0.896416-514.364861c0.032746-19.22997-6.741541-35.489282-20.320814-48.783053-13.58132-13.292748-29.997198-19.952424-49.228191-19.98517L889.121592 97.606015zM245.818103 421.330978c0.028653-16.255219 5.860475-30.18344 17.496489-41.769312 11.615549-11.594059 25.41074-17.377786 41.331337-17.350157 6.621814 0.01228 12.93459 1.026376 18.900465 3.02694 5.948479 2.00875 11.425214 4.840238 16.411785 8.495488 4.968152 3.663436 9.284457 7.975649 12.912078 12.948917 3.609201 4.972245 6.421246 10.458189 8.438183 16.45067 1.997494 5.982248 2.980891 12.298094 2.952238 18.918885-0.042979 24.530696-11.343349 42.086537-33.939997 52.65729-7.966439 3.975545-16.600073 5.959735-25.898857 5.944386-15.902178-0.027629-29.677926-5.859451-41.252543-17.485233C251.573177 451.534883 245.789451 437.586197 245.818103 421.330978L245.818103 421.330978zM452.760293 422.206928c0.020466-11.271718 2.697435-21.388123 8.03193-30.334889 5.297656-8.945743 12.456706-16.070001 21.420869-21.355377 8.964162-5.294586 18.917862-7.927553 29.881564-7.90811 10.945283 0.01842 20.891819 2.686179 29.836539 8.011464 8.964162 5.325285 16.080234 12.465916 21.364587 21.430078 5.285377 8.965186 7.927553 19.080567 7.90811 30.361495-0.027629 15.920598-5.859451 29.667693-17.493419 41.261753-11.634991 11.585873-25.575492 17.368576-41.821501 17.339924-16.264429-0.027629-30.18344-5.859451-41.776476-17.485233C458.515367 451.895087 452.733687 438.117292 452.760293 422.206928L452.760293 422.206928zM661.715325 422.054455c0.027629-16.254196 5.859451-30.18344 17.494443-41.769312 11.632945-11.594059 25.41074-17.376763 41.331337-17.349133 11.252275 0.019443 21.379936 2.696412 30.325679 8.021697 8.946766 5.316076 16.060791 12.464893 21.347191 21.430078 5.302773 8.964162 7.92653 19.080567 7.907087 30.352285-0.027629 15.920598-5.860475 29.668717-17.476023 41.262776-11.633968 11.584849-25.574469 17.368576-41.838897 17.339924-16.264429-0.019443-30.184463-5.851265-41.778522-17.486256-11.593036-11.634991-17.359366-25.574469-17.330714-41.829687L661.715325 422.054455zM661.715325 422.054455"
        fill="#272636"
        p-id="2334"
      ></path>
    </svg>
    <svg
      id="gengduo"
      t="1677823704227"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2053"
      width="200"
      height="200"
    >
      <path
        d="M440 112m72 0l0 0q72 0 72 72l0 0q0 72-72 72l0 0q-72 0-72-72l0 0q0-72 72-72Z"
        fill="#1A1A1A"
        p-id="2054"
      ></path>
      <path
        d="M440 440m72 0l0 0q72 0 72 72l0 0q0 72-72 72l0 0q-72 0-72-72l0 0q0-72 72-72Z"
        fill="#1A1A1A"
        p-id="2055"
      ></path>
      <path
        d="M440 768m72 0l0 0q72 0 72 72l0 0q0 72-72 72l0 0q-72 0-72-72l0 0q0-72 72-72Z"
        fill="#1A1A1A"
        p-id="2056"
      ></path>
    </svg>
  </div>
  <div class="goLine">
    {{ trans(currentTime) }}
    <input
      type="range"
      class="range"
      id="time"
      min="0"
      :max="duration"
      :value="currentTime"
      step="0.05"
      @input="move"
    />
    {{ trans(duration) }}
  </div>
  <div class="options">
    <svg
      id="playS"
      t="1677824324693"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2115"
      width="200"
      height="200"
      aria-hidden="true"
      v-if="this.MoShi == 0"
      @click="changeState"
    >
      <path
        d="M240.693333 589.546667a32 32 0 0 0-22.666666 9.386666l-113.12 113.12a64 64 0 0 0 0 90.666667l113.12 113.013333a32 32 0 0 0 45.28-45.28L150.186667 757.333333l113.12-113.12a32 32 0 0 0-22.613334-54.666666zM783.306667 98.88a32 32 0 0 0-22.613334 54.666667L873.813333 266.666667l-113.12 113.12a32 32 0 1 0 45.28 45.28l113.12-113.12a64 64 0 0 0 0-90.666667L805.973333 108.266667a32 32 0 0 0-22.666666-9.386667z"
        fill="#333333"
        p-id="2116"
      ></path>
      <path
        d="M117.973333 544a32 32 0 0 1-32-32V437.333333a202.666667 202.666667 0 0 1 202.666667-202.666666h597.333333a32 32 0 0 1 0 64h-597.333333a138.666667 138.666667 0 0 0-138.666667 138.666666v74.666667a32 32 0 0 1-32 32zM736.64 789.333333h-602.666667a32 32 0 0 1 0-64h602.666667a138.666667 138.666667 0 0 0 138.666667-138.666666V512a32 32 0 0 1 64 0v74.666667a202.666667 202.666667 0 0 1-202.666667 202.666666z"
        fill="#333333"
        p-id="2117"
      ></path>
    </svg>
    <svg
      id="playSX"
      t="1677996073076"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="6866"
      width="200"
      height="200"
      aria-hidden="true"
      v-else-if="this.MoShi == 1"
      @click="changeState"
    >
      <path
        d="M928 476.8c-19.2 0-32 12.8-32 32v86.4c0 108.8-86.4 198.4-198.4 198.4H201.6l41.6-38.4c6.4-6.4 12.8-16 12.8-25.6 0-19.2-16-35.2-35.2-35.2-9.6 0-22.4 3.2-28.8 9.6l-108.8 99.2c-16 12.8-12.8 35.2 0 48l108.8 96c6.4 6.4 19.2 12.8 28.8 12.8 19.2 0 35.2-12.8 38.4-32 0-12.8-6.4-22.4-16-28.8l-48-44.8h499.2c147.2 0 265.6-118.4 265.6-259.2v-86.4c0-19.2-12.8-32-32-32zM96 556.8c19.2 0 32-12.8 32-32v-89.6c0-112 89.6-201.6 198.4-204.8h496l-41.6 38.4c-6.4 6.4-12.8 16-12.8 25.6 0 19.2 16 35.2 35.2 35.2 9.6 0 22.4-3.2 28.8-9.6l105.6-99.2c16-12.8 12.8-35.2 0-48l-108.8-96c-6.4-6.4-19.2-12.8-28.8-12.8-19.2 0-35.2 12.8-38.4 32 0 12.8 6.4 22.4 16 28.8l48 44.8H329.6C182.4 169.6 64 288 64 438.4v86.4c0 19.2 12.8 32 32 32z"
        p-id="6867"
      ></path>
      <path d="M544 672V352h-48L416 409.6l16 41.6 60.8-41.6V672z" p-id="6868"></path>
    </svg>
    <svg
      id="suiJi"
      t="1677997150180"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="7875"
      width="200"
      height="200"
      aria-hidden="true"
      v-else-if="this.MoShi == 2"
      @click="changeState"
    >
      <path
        d="M753.564731 337.471035c-45.8697 0-160.259984 113.849978-243.789399 194.548928C383.134027 654.383848 263.508509 773.284865 167.764911 773.284865l-58.892295 0c-24.068162 0-43.581588-19.526729-43.581588-43.581588s19.513426-43.581588 43.581588-43.581588l58.892295 0c60.504002 0 183.002964-121.68134 281.432741-216.784348 119.79641-115.744117 223.254713-219.029482 304.368102-219.029482l56.209186 0-59.641355-57.828057c-17.033955-16.993023-17.060561-42.902112-0.057305-59.927881 17.002232-17.030885 44.596707-17.064654 61.631686-0.065492l134.207631 133.874033c8.192589 8.172123 12.794397 19.238157 12.794397 30.803563 0 11.564383-4.601808 22.604834-12.794397 30.776957L811.706943 461.72599c-8.505721 8.486278-19.646456 12.522198-30.78719 12.522198-11.166317 0-22.333658-4.676509-30.844495-13.199627-17.003256-17.025769-16.975627-45.432749 0.057305-62.425771l59.641355-61.151755L753.564731 337.471035zM811.706943 561.66105c-17.034978-16.999163-44.629453-16.972557-61.631686 0.058328-17.003256 17.024745-16.975627 46.257533 0.057305 63.250556l59.641355 61.150732-56.209186 0c-35.793204 0-95.590102-52.946886-154.87637-108.373243-17.576307-16.435321-45.161572-16.3422-61.594847 1.226944-16.444531 17.568121-15.523555 46.393633 2.053776 62.823837 90.322122 84.458577 151.246703 131.484613 214.417441 131.484613l56.209186 0-59.641355 57.824987c-17.033955 16.993023-17.060561 43.736107-0.057305 60.761875 8.511861 8.523117 19.678178 12.369725 30.844495 12.369725 11.140735 0 22.281469-4.453429 30.78719-12.939707L945.914574 757.311055c8.192589-8.173147 12.794397-19.315928 12.794397-30.881334 0-11.564383-4.601808-22.682605-12.794397-30.855752L811.706943 561.66105zM108.871593 337.471035l58.892295 0c45.932122 0 114.40154 58.455343 168.915108 107.942431 8.352225 7.576559 18.832927 12.140505 29.29214 12.140505 11.852956 0 23.673166-4.394077 32.270984-13.857613 16.182564-17.807574 14.859429-46.823422-2.958378-62.998823-85.247546-77.381391-156.561755-130.388652-227.519854-130.388652l-58.892295 0c-24.068162 0-43.581588 19.526729-43.581588 43.581588S84.804455 337.471035 108.871593 337.471035z"
        p-id="7876"
      ></path>
    </svg>
    <svg
      id="xinDong"
      t="1677997219967"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="9179"
      width="200"
      height="200"
      aria-hidden="true"
      v-else
      @click="changeState"
    >
      <path
        d="M806.4 265.6c-62.4-62.4-160-73.6-235.2-25.6-12.8 8-24 16-33.6 27.2l-1.6 1.6-3.2-1.6c-9.6-9.6-20.8-19.2-33.6-27.2-89.6-56-208-28.8-262.4 60.8-36.8 60.8-38.4 136-1.6 198.4 43.2 68.8 224 264 232 272 38.4 38.4 100.8 38.4 139.2 1.6l1.6-1.6c20.8-22.4 203.2-217.6 232-273.6 41.6-75.2 28.8-169.6-33.6-232z m-25.6 200l-1.6 1.6c-17.6 33.6-145.6 177.6-220.8 259.2-12.8 12.8-33.6 12.8-48 1.6-1.6-1.6-184-198.4-224-260.8-28.8-49.6-20.8-113.6 19.2-153.6 41.6-41.6 107.2-49.6 158.4-17.6 8 4.8 16 11.2 22.4 17.6L512 336c12.8 12.8 32 12.8 44.8 0l25.6-25.6c6.4-6.4 14.4-12.8 22.4-17.6 49.6-32 115.2-24 156.8 17.6 41.6 41.6 49.6 105.6 19.2 155.2z"
        fill="#231815"
        p-id="9180"
      ></path>
      <path
        d="M702.4 468.8h-96c-6.4 0-12.8 3.2-14.4 9.6l-30.4 70.4-35.2-131.2c-1.6-6.4-8-11.2-14.4-11.2s-12.8 3.2-16 8l-27.2 54.4h-102.4c-9.6 0-16 6.4-16 16s6.4 16 16 16h112c6.4 0 11.2-3.2 14.4-8l12.8-27.2 38.4 136c1.6 6.4 8 11.2 14.4 11.2h1.6c6.4 0 12.8-3.2 14.4-9.6l43.2-102.4H704c9.6 0 16-6.4 16-16s-8-16-17.6-16z"
        fill="#231815"
        p-id="9181"
      ></path>
    </svg>
    <svg
      id="pre"
      t="1677824174204"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2084"
      width="200"
      height="200"
      @click="goPlay(-1)"
    >
      <path
        d="M256 224a32 32 0 0 1 32 32v512a32 32 0 0 1-64 0V256a32 32 0 0 1 32-32z m385.952 30.624a96 96 0 0 1 157.44 73.76v366.72a96 96 0 0 1-157.44 73.76l-220.032-183.36a96 96 0 0 1 0-147.52z m86.048 53.28a32 32 0 0 0-45.056-4.096l-220.032 183.36a32 32 0 0 0-4.096 4.096l-2.4 3.232a32 32 0 0 0 6.496 41.824l220.032 183.36a32 32 0 0 0 52.48-24.576v-366.72a32 32 0 0 0-7.424-20.48z"
        fill="#000000"
        p-id="2085"
      ></path>
    </svg>
    <svg
      t="1677826511454"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2175"
      width="200"
      height="200"
      aria-hidden="true"
      v-if="toPlay"
      @click="play"
    >
      <path
        d="M697.83096889 63.39394333A484.0440411 484.0440411 0 0 0 512 26.54814777C243.88494222 26.54814777 26.54814777 243.88494222 26.54814777 512s217.33679445 485.45185223 485.45185223 485.45185223 485.45185223-217.33679445 485.45185223-485.45185223c0-64.56509667-12.62174777-127.43111111-36.84579556-185.83096889a24.27259221 24.27259221 0 0 0-44.83147889 18.59280555A435.49885667 435.49885667 0 0 1 948.90666667 512c0 241.29384334-195.61282333 436.90666667-436.90666667 436.90666667S75.09333333 753.29384334 75.09333333 512 270.70615666 75.09333333 512 75.09333333c58.15713223 0 114.688 11.35957333 167.23816334 33.13208889a24.27259221 24.27259221 0 0 0 18.59280555-44.83147889zM449.08544 277.52675555C421.77877333 258.44849778 390.63703666 274.29850112 390.63703666 306.96940999v410.20681558c0 32.52527445 31.33591666 48.39955001 58.44840334 29.41838222l287.12049778-201.12270222c24.75804445-17.35490333 24.61240889-49.5403611 0-66.79817558l-287.14476999-201.12270222z m-9.78185443 417.24586667V329.34874112l260.85755221 182.72407666-260.85755221 182.72407665z"
        fill="#3D3D3D"
        p-id="2176"
      ></path>
    </svg>
    <svg
      t="1677824502782"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2145"
      width="200"
      height="200"
      aria-hidden="true"
      v-else
      @click="play"
    >
      <path
        d="M512 2.27555555c281.51352889 0 509.72444445 228.21091555 509.72444445 509.72444445S793.51352889 1021.72444445 512 1021.72444445 2.27555555 793.51352889 2.27555555 512 230.48647111 2.27555555 512 2.27555555z m0 77.3688889c-238.78314667 0-432.35555555 193.57240889-432.35555555 432.35555555s193.57240889 432.35555555 432.35555555 432.35555555 432.35555555-193.57240889 432.35555555-432.35555555-193.57240889-432.35555555-432.35555555-432.35555555zM384.56888889 329.95555555c20.10794667 0 36.40888889 16.30094222 36.40888889 36.4088889v291.2711111c0 20.10794667-16.30094222 36.40888889-36.40888889 36.4088889-20.10794667 0-36.40888889-16.30094222-36.40888889-36.4088889V366.36444445c0-20.10794667 16.30094222-36.40888889 36.40888889-36.4088889z m256 0c20.10794667 0 36.40888889 16.30094222 36.40888889 36.4088889v291.2711111c0 20.10794667-16.30094222 36.40888889-36.40888889 36.4088889-20.10794667 0-36.40888889-16.30094222-36.40888889-36.4088889V366.36444445c0-20.10794667 16.30094222-36.40888889 36.40888889-36.4088889z"
        fill="#000000"
        p-id="2146"
      ></path>
    </svg>
    <svg
      id="next"
      t="1677824187122"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2223"
      width="200"
      height="200"
      @click="goPlay(1)"
    >
      <path
        d="M768 224a32 32 0 0 1 32 32v512a32 32 0 0 1-64 0V256a32 32 0 0 1 32-32z m-386.336 31.36l220.032 183.36a96 96 0 0 1 0 147.52l-220.032 183.36a96 96 0 0 1-157.44-73.76v-366.72a96 96 0 0 1 157.44-73.76zM295.616 308.64a32 32 0 0 0-7.424 20.48v366.72a32 32 0 0 0 52.48 24.576l220.032-183.36a32 32 0 0 0 6.496-41.824l-2.4-3.264a32 32 0 0 0-4.096-4.096l-220.032-183.36a32 32 0 0 0-45.056 4.128z"
        fill="#000000"
        p-id="2224"
      ></path>
    </svg>
    <svg
      id="list"
      t="1677824235776"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2501"
      width="200"
      height="200"
      @click="updateListShow"
    >
      <path
        d="M736 352a32 32 0 0 1 31.264 25.088c4.384 18.816 9.792 32.256 15.232 39.712l2.336 3.008c0.8 0.896 1.088 1.024 1.28 1.024 46.624 0 65.76 39.68 65.088 101.024a32 32 0 0 1-64-0.704c0.192-16.32-1.344-28.16-3.776-34.944l-0.608-1.504-1.92-0.032a65.088 65.088 0 0 1-12.896-2.24V736c0 57.824-66.816 96-144 96S480 793.824 480 736s66.816-96 144-96c29.184 0 56.864 5.44 80.032 15.36L704 384.704c0-1.408 0.032-2.816 0.192-4.224L704 384a32 32 0 0 1 32-32zM416 704a32 32 0 0 1 0 64H224a32 32 0 0 1 0-64h192z m208 0c-46.528 0-80 19.136-80 32s33.472 32 80 32 80-19.136 80-32-33.472-32-80-32zM544 448a32 32 0 0 1 0 64H224a32 32 0 0 1 0-64h320z m256-256a32 32 0 0 1 0 64H224a32 32 0 1 1 0-64h576z"
        fill="#000000"
        p-id="2502"
      ></path>
    </svg>
  </div>
</template>
<script>
import { getComments } from "@/request/api/item";
import { mapMutations, mapState } from "vuex";
export default {
  data() {
    return {
      isLyricShow: false,
      lyrics: true,
    };
  },
  setup(props) {
    // console.log(props);
  },
  computed: {
    ...mapState(["lyricList", "currentTime", "duration", "MoShi", "comments"]),
    lyric: function () {
      let arr;
      if (this.lyricList.lyric) {
        // console.log(this.lyricList.lyric);
        arr = this.lyricList.lyric.split(/[(\r\n)\r\n]+/).map((item, i) => {
          let min = item.slice(1, 3);
          let sec = item.slice(4, 6);
          let mill = item.slice(7, 9);
          let lrc = item.slice(11, item.length);
          //   console.log(min, sec, mill, lrc);
          let time = parseInt(min * 60 * 1000) + parseInt(sec * 1000) + parseInt(mill);
          return { min, sec, mill, lrc, time };
        });
        if (arr[1].min == 99) {
          this.lyrics = false;
          return arr;
        }
        arr.forEach((item, i) => {
          if (i === arr.length - 1 || isNaN(arr[i + 1].time)) {
            item.next = 1000000;
          } else {
            item.next = arr[i + 1].time;
          }
        });
      }
      //   console.log(arr);
      return arr;
    },
  },
  mounted() {
    this.getDuration();
    // console.log(this.lyricList.lyric);
  },
  props: [
    "music",
    "playlist",
    "playlistIndex",
    "toPlay",
    "play",
    "getDuration",
    "moveTime",
  ],
  components: {},
  updated() {
    this.getDuration();
  },
  methods: {
    openComments: async function () {
      // console.log(this.playlist);
      let id = this.playlist[this.playlistIndex].id;
      // console.log(id);
      let info = { type: "music", id: id, limit: 100 };
      let res = await getComments(info);
      // console.log(res.data);
      this.comments = res.data;
      this.updateComments(res.data);
      this.$router.push("/commentsPage");
      this.updateDetailShow();
    },
    changeState: function () {
      this.updateMoShi();
      console.log(this.MoShi);
    },
    move: function () {
      // this.moveTime(i);
      let line = document.getElementById("time");
      this.moveTime(line.value);
    },
    trans: function (i) {
      if (!i) return;
      i = Math.round(i);
      let min = Math.round(i / 60);
      let sec = i % 60;
      return min + ":" + (sec >= 10 ? sec : "0" + sec);
    },
    goPlay: function (i) {
      let index = this.playlistIndex + i;
      if (index < 0) {
        index = this.playlist.length - 1;
      } else if (index == this.playlist.length) {
        index = 0;
      }
      this.updatePlayListIndex(index);
      // console.log(this.playlist[this.playlistIndex]);
      this.getDuration();
      // console.log(this.duration);
    },
    ...mapMutations([
      "updateDetailShow",
      "updatePlayListIndex",
      "updateDuration",
      "updateListShow",
      "updateMoShi",
      "updateComments",
    ]),
  },
  watch: {
    currentTime: function (newValue) {
      if (this.lyrics == false) return;
      let p = document.querySelector("p.active");
      //   console.log([p]);
      if (!p) return;
      if (p.offsetTop > 250) {
        this.$refs.musicLyric.scrollTop = p.offsetTop - 250;
      }
      if (newValue === this.duration) {
        if (this.MoShi == 2) {
          let a = Math.round(Math.random() * this.playlist.length);
          console.log(a);
          this.updatePlayListIndex(a);
          // console.log((this.playlistIndex + a) % this.playlist.length);
          // this.updatePlayListIndex((this.playlistIndex + a) % this.playlist.length);
          return;
        }
        if (this.playlistIndex === this.playlist.length - 1) {
          this.updatePlayListIndex(0);
        } else {
          this.updatePlayListIndex(this.playlistIndex + 1);
        }
        this.getDuration();
      }
    },
  },
};
</script>
<style lang="less" scoped>
.top {
  position: absolute;
  left: 3%;
  width: 94%;
  //   background-color: red;
  height: 3rem;
  display: flex;
  align-items: center;
  justify-content: space-between;

  .info {
    text-align: center;

    .song {
      font-size: medium;
    }
    .singer {
      font-size: xx-small;
    }
  }
}
.main {
  position: absolute;
  top: 3rem;
  width: 100%;
  height: 30rem;

  .back {
    position: absolute;
    top: -3rem;
    height: 138%;
    width: 100%;
    background-color: rgba(21, 21, 21, 0.2);
    z-index: -1;
    img {
      // height: 30rem;
      width: 100%;
      height: 100%;
      filter: blur(10px);
      opacity: 0.4;
    }
  }
  .box {
    position: absolute;
    width: 80%;
    height: 63%;
    margin: 15% 10%;
    border: 0.1rem solid;
    border-radius: 100%;
    padding: 0.6rem;

    .img_ar {
      width: 100%;
      height: 100%;
      border: 0.5rem solid;
      border-radius: 100%;
    }
  }

  .img_ar_active {
    animation: rotate_ar 10s linear infinite;
    animation-play-state: running;
  }
  .img_ar_paused {
    animation: rotate_ar 10s linear infinite;
    animation-play-state: paused;
  }
  @keyframes rotate_ar {
    0% {
      transform: rotateZ(0deg);
    }
    100% {
      transform: rotateZ(360deg);
    }
  }
  .musicLyric {
    width: 100%;
    height: 28rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 1rem;
    overflow: scroll;

    p {
      color: azure;
      margin-bottom: 1rem;
      font-size: small;
    }
    .active {
      color: #fff;
      font-size: larger;
    }
  }
}
.icons {
  position: absolute;
  left: 5%;
  top: 33em;
  width: 90%;
  height: 3rem;
  //   background-color: blueviolet;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.goLine {
  position: absolute;
  bottom: 4rem;
  left: 2%;
  width: 96%;
  height: 1rem;
  display: flex;
  justify-content: space-around;
  align-items: center;
  font-size: xx-small;

  .range {
    width: 80%;
    height: 0.06rem;
  }
}
.options {
  position: absolute;
  bottom: 0;
  left: 4%;
  width: 92%;
  height: 4rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  //   background-color: cornflowerblue;
}
</style>
